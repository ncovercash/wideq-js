"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const device_1 = require("../core/device");
const utils_1 = require("../utils");
/**
 * The state of the dryer device.
 */
var DryerState;
(function (DryerState) {
    DryerState["COOLING"] = "@WM_STATE_COOLING_W";
    DryerState["END"] = "@WM_STATE_END_W";
    DryerState["ERROR"] = "@WM_STATE_ERROR_W";
    DryerState["DRYING"] = "@WM_STATE_DRYING_W";
    DryerState["INITIAL"] = "@WM_STATE_INITIAL_W";
    DryerState["OFF"] = "@WM_STATE_POWER_OFF_W";
    DryerState["PAUSE"] = "@WM_STATE_PAUSE_W";
    DryerState["RUNNING"] = "@WM_STATE_RUNNING_W";
    DryerState["SMART_DIAGNOSIS"] = "@WM_STATE_SMART_DIAGNOSIS_W";
    DryerState["WRINKLE_CARE"] = "@WM_STATE_WRINKLECARE_W";
})(DryerState = exports.DryerState || (exports.DryerState = {}));
/**
 * Represents the dry level setting of the dryer.
 */
var DryLevel;
(function (DryLevel) {
    DryLevel["CUPBOARD"] = "@WM_DRY27_DRY_LEVEL_CUPBOARD_W";
    DryLevel["DAMP"] = "@WM_DRY27_DRY_LEVEL_DAMP_W";
    DryLevel["EXTRA"] = "@WM_DRY27_DRY_LEVEL_EXTRA_W";
    DryLevel["IRON"] = "@WM_DRY27_DRY_LEVEL_IRON_W";
    DryLevel["LESS"] = "@WM_DRY27_DRY_LEVEL_LESS_W";
    DryLevel["MORE"] = "@WM_DRY27_DRY_LEVEL_MORE_W";
    DryLevel["NORMAL"] = "@WM_DRY27_DRY_LEVEL_NORMAL_W";
    DryLevel["OFF"] = "-";
    DryLevel["VERY"] = "@WM_DRY27_DRY_LEVEL_VERY_W";
})(DryLevel = exports.DryLevel || (exports.DryLevel = {}));
/**
 * A dryer error.
 */
var DryerError;
(function (DryerError) {
    DryerError["ERROR_AE"] = "@WM_US_DRYER_ERROR_AE_W";
    DryerError["ERROR_CE1"] = "@WM_US_DRYER_ERROR_CE1_W";
    DryerError["ERROR_DE4"] = "@WM_WW_FL_ERROR_DE4_W";
    DryerError["ERROR_DOOR"] = "@WM_US_DRYER_ERROR_DE_W";
    DryerError["ERROR_DRAINMOTOR"] = "@WM_US_DRYER_ERROR_OE_W";
    DryerError["ERROR_EMPTYWATER"] = "@WM_US_DRYER_ERROR_EMPTYWATER_W";
    DryerError["ERROR_F1"] = "@WM_US_DRYER_ERROR_F1_W";
    DryerError["ERROR_LE1"] = "@WM_US_DRYER_ERROR_LE1_W";
    DryerError["ERROR_LE2"] = "@WM_US_DRYER_ERROR_LE2_W";
    DryerError["ERROR_NOFILTER"] = "@WM_US_DRYER_ERROR_NOFILTER_W";
    DryerError["ERROR_NP"] = "@WM_US_DRYER_ERROR_NP_GAS_W";
    DryerError["ERROR_PS"] = "@WM_US_DRYER_ERROR_PS_W";
    DryerError["ERROR_TE1"] = "@WM_US_DRYER_ERROR_TE1_W";
    DryerError["ERROR_TE2"] = "@WM_US_DRYER_ERROR_TE2_W";
    DryerError["ERROR_TE5"] = "@WM_US_DRYER_ERROR_TE5_W";
    DryerError["ERROR_TE6"] = "@WM_US_DRYER_ERROR_TE6_W";
})(DryerError = exports.DryerError || (exports.DryerError = {}));
/**
 * Represents temperature control setting.
 */
var TempControl;
(function (TempControl) {
    TempControl["OFF"] = "-";
    TempControl["ULTRA_LOW"] = "@WM_DRY27_TEMP_ULTRA_LOW_W";
    TempControl["LOW"] = "@WM_DRY27_TEMP_LOW_W";
    TempControl["MEDIUM"] = "@WM_DRY27_TEMP_MEDIUM_W";
    TempControl["MID_HIGH"] = "@WM_DRY27_TEMP_MID_HIGH_W";
    TempControl["HIGH"] = "@WM_DRY27_TEMP_HIGH_W";
})(TempControl = exports.TempControl || (exports.TempControl = {}));
/**
 * Represents a timed dry setting.
 */
var TimeDry;
(function (TimeDry) {
    TimeDry["OFF"] = "-";
    TimeDry["TWENTY"] = "20";
    TimeDry["THIRTY"] = "30";
    TimeDry["FOURTY"] = "40";
    TimeDry["FIFTY"] = "50";
    TimeDry["SIXTY"] = "60";
})(TimeDry = exports.TimeDry || (exports.TimeDry = {}));
class DryerDevice extends device_1.Device {
    poll() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.monitor) {
                return null;
            }
            const resp = yield this.monitor.poll();
            if (resp) {
                const data = this.model.decodeMonitor(resp);
                return new DryerStatus(this, data);
            }
            return null;
        });
    }
}
exports.DryerDevice = DryerDevice;
class DryerStatus {
    constructor(device, data) {
        this.device = device;
        this.data = data;
    }
    get state() {
        const key = utils_1.lookupEnum('State', this.data, this.device);
        return utils_1.asEnum(DryerState, key);
    }
    get previousState() {
        const key = utils_1.lookupEnum('PreState', this.data, this.device);
        return utils_1.asEnum(DryerState, key);
    }
    get dryLevel() {
        const key = utils_1.lookupEnum('DryLevel', this.data, this.device);
        return utils_1.asEnum(DryLevel, key);
    }
    get temperatureControl() {
        const key = utils_1.lookupEnum('TempControl', this.data, this.device);
        return utils_1.asEnum(TempControl, key);
    }
    get timeDry() {
        const key = utils_1.lookupEnum('TimeDry', this.data, this.device);
        return utils_1.asEnum(TimeDry, key);
    }
    get isOn() {
        return this.state !== DryerState.OFF;
    }
    get remainingTime() {
        return utils_1.asTime('Remain_Time_H', 'Remain_Time_M', this.data);
    }
    get initialTime() {
        return utils_1.asTime('Initial_Time_H', 'Initial_Time_M', this.data);
    }
    get course() {
        const value = utils_1.lookupReference('Course', this.data, this.device);
        return value;
    }
    get smartCourse() {
        const value = utils_1.lookupReference('SmartCourse', this.data, this.device);
        return value;
    }
    get error() {
        const value = utils_1.lookupReference('Error', this.data, this.device);
        return value;
    }
}
exports.DryerStatus = DryerStatus;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJ5ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9saWIvZGV2aWNlcy9kcnllci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsMkNBQXdDO0FBQ3hDLG9DQUF1RTtBQUV2RTs7R0FFRztBQUNILElBQVksVUFXWDtBQVhELFdBQVksVUFBVTtJQUNwQiw2Q0FBK0IsQ0FBQTtJQUMvQixxQ0FBdUIsQ0FBQTtJQUN2Qix5Q0FBMkIsQ0FBQTtJQUMzQiwyQ0FBNkIsQ0FBQTtJQUM3Qiw2Q0FBK0IsQ0FBQTtJQUMvQiwyQ0FBNkIsQ0FBQTtJQUM3Qix5Q0FBMkIsQ0FBQTtJQUMzQiw2Q0FBK0IsQ0FBQTtJQUMvQiw2REFBK0MsQ0FBQTtJQUMvQyxzREFBd0MsQ0FBQTtBQUMxQyxDQUFDLEVBWFcsVUFBVSxHQUFWLGtCQUFVLEtBQVYsa0JBQVUsUUFXckI7QUFFRDs7R0FFRztBQUNILElBQVksUUFVWDtBQVZELFdBQVksUUFBUTtJQUNsQix1REFBMkMsQ0FBQTtJQUMzQywrQ0FBbUMsQ0FBQTtJQUNuQyxpREFBcUMsQ0FBQTtJQUNyQywrQ0FBbUMsQ0FBQTtJQUNuQywrQ0FBbUMsQ0FBQTtJQUNuQywrQ0FBbUMsQ0FBQTtJQUNuQyxtREFBdUMsQ0FBQTtJQUN2QyxxQkFBUyxDQUFBO0lBQ1QsK0NBQW1DLENBQUE7QUFDckMsQ0FBQyxFQVZXLFFBQVEsR0FBUixnQkFBUSxLQUFSLGdCQUFRLFFBVW5CO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLFVBaUJYO0FBakJELFdBQVksVUFBVTtJQUNwQixrREFBb0MsQ0FBQTtJQUNwQyxvREFBc0MsQ0FBQTtJQUN0QyxpREFBbUMsQ0FBQTtJQUNuQyxvREFBc0MsQ0FBQTtJQUN0QywwREFBNEMsQ0FBQTtJQUM1QyxrRUFBb0QsQ0FBQTtJQUNwRCxrREFBb0MsQ0FBQTtJQUNwQyxvREFBc0MsQ0FBQTtJQUN0QyxvREFBc0MsQ0FBQTtJQUN0Qyw4REFBZ0QsQ0FBQTtJQUNoRCxzREFB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QUNiLE9BQU8sSUFBSSxDQUFDLEtBQUssS0FBSyxVQUFVLENBQUMsR0FBRyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCxJQUFXLGFBQWE7UUFDdEIsT0FBTyxjQUFNLENBQUMsZUFBZSxFQUFFLGVBQWUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUVELElBQVcsV0FBVztRQUNwQixPQUFPLGNBQU0sQ0FBQyxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUVELElBQVcsTUFBTTtRQUNmLE1BQU0sS0FBSyxHQUFHLHVCQUFlLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2hFLE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUVELElBQVcsV0FBVztRQUNwQixNQUFNLEtBQUssR0FBRyx1QkFBZSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNyRSxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7SUFFRCxJQUFXLEtBQUs7UUFDZCxNQUFNLEtBQUssR0FBRyx1QkFBZSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMvRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7Q0FDRjtBQXpERCxrQ0F5REMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZXZpY2UgfSBmcm9tICcuLi9jb3JlL2RldmljZSc7XG5pbXBvcnQgeyBhc0VudW0sIGFzVGltZSwgbG9va3VwRW51bSwgbG9va3VwUmVmZXJlbmNlIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG4vKipcbiAqIFRoZSBzdGF0ZSBvZiB0aGUgZHJ5ZXIgZGV2aWNlLlxuICovXG5leHBvcnQgZW51bSBEcnllclN0YXRlIHtcbiAgQ09PTElORyA9ICdAV01fU1RBVEVfQ09PTElOR19XJyxcbiAgRU5EID0gJ0BXTV9TVEFURV9FTkRfVycsXG4gIEVSUk9SID0gJ0BXTV9TVEFURV9FUlJPUl9XJyxcbiAgRFJZSU5HID0gJ0BXTV9TVEFURV9EUllJTkdfVycsXG4gIElOSVRJQUwgPSAnQFdNX1NUQVRFX0lOSVRJQUxfVycsXG4gIE9GRiA9ICdAV01fU1RBVEVfUE9XRVJfT0ZGX1cnLFxuICBQQVVTRSA9ICdAV01fU1RBVEVfUEFVU0VfVycsXG4gIFJVTk5JTkcgPSAnQFdNX1NUQVRFX1JVTk5JTkdfVycsXG4gIFNNQVJUX0RJQUdOT1NJUyA9ICdAV01fU1RBVEVfU01BUlRfRElBR05PU0lTX1cnLFxuICBXUklOS0xFX0NBUkUgPSAnQFdNX1NUQVRFX1dSSU5LTEVDQVJFX1cnLFxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGRyeSBsZXZlbCBzZXR0aW5nIG9mIHRoZSBkcnllci5cbiAqL1xuZXhwb3J0IGVudW0gRHJ5TGV2ZWwge1xuICBDVVBCT0FSRCA9ICdAV01fRFJZMjdfRFJZX0xFVkVMX0NVUEJPQVJEX1cnLFxuICBEQU1QID0gJ0BXTV9EUlkyN19EUllfTEVWRUxfREFNUF9XJyxcbiAgRVhUUkEgPSAnQFdNX0RSWTI3X0RSWV9MRVZFTF9FWFRSQV9XJyxcbiAgSVJPTiA9ICdAV01fRFJZMjdfRFJZX0xFVkVMX0lST05fVycsXG4gIExFU1MgPSAnQFdNX0RSWTI3X0RSWV9MRVZFTF9MRVNTX1cnLFxuICBNT1JFID0gJ0BXTV9EUlkyN19EUllfTEVWRUxfTU9SRV9XJyxcbiAgTk9STUFMID0gJ0BXTV9EUlkyN19EUllfTEVWRUxfTk9STUFMX1cnLFxuICBPRkYgPSAnLScsXG4gIFZFUlkgPSAnQFdNX0RSWTI3X0RSWV9MRVZFTF9WRVJZX1cnLFxufVxuXG4vKipcbiAqIEEgZHJ5ZXIgZXJyb3IuXG4gKi9cbmV4cG9ydCBlbnVtIERyeWVyRXJyb3Ige1xuICBFUlJPUl9BRSA9ICdAV01fVVNfRFJZRVJfRVJST1JfQUVfVycsXG4gIEVSUk9SX0NFMSA9ICdAV01fVVNfRFJZRVJfRVJST1JfQ0UxX1cnLFxuICBFUlJPUl9ERTQgPSAnQFdNX1dXX0ZMX0VSUk9SX0RFNF9XJyxcbiAgRVJST1JfRE9PUiA9ICdAV01fVVNfRFJZRVJfRVJST1JfREVfVycsXG4gIEVSUk9SX0RSQUlOTU9UT1IgPSAnQFdNX1VTX0RSWUVSX0VSUk9SX09FX1cnLFxuICBFUlJPUl9FTVBUWVdBVEVSID0gJ0BXTV9VU19EUllFUl9FUlJPUl9FTVBUWVdBVEVSX1cnLFxuICBFUlJPUl9GMSA9ICdAV01fVVNfRFJZRVJfRVJST1JfRjFfVycsXG4gIEVSUk9SX0xFMSA9ICdAV01fVVNfRFJZRVJfRVJST1JfTEUxX1cnLFxuICBFUlJPUl9MRTIgPSAnQFdNX1VTX0RSWUVSX0VSUk9SX0xFMl9XJyxcbiAgRVJST1JfTk9GSUxURVIgPSAnQFdNX1VTX0RSWUVSX0VSUk9SX05PRklMVEVSX1cnLFxuICBFUlJPUl9OUCA9ICdAV01fVVNfRFJZRVJfRVJST1JfTlBfR0FTX1cnLFxuICBFUlJPUl9QUyA9ICdAV01fVVNfRFJZRVJfRVJST1JfUFNfVycsXG4gIEVSUk9SX1RFMSA9ICdAV01fVVNfRFJZRVJfRVJST1JfVEUxX1cnLFxuICBFUlJPUl9URTIgPSAnQFdNX1VTX0RSWUVSX0VSUk9SX1RFMl9XJyxcbiAgRVJST1JfVEU1ID0gJ0BXTV9VU19EUllFUl9FUlJPUl9URTVfVycsXG4gIEVSUk9SX1RFNiA9ICdAV01fVVNfRFJZRVJfRVJST1JfVEU2X1cnLFxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgdGVtcGVyYXR1cmUgY29udHJvbCBzZXR0aW5nLlxuICovXG5leHBvcnQgZW51bSBUZW1wQ29udHJvbCB7XG4gIE9GRiA9ICctJyxcbiAgVUxUUkFfTE9XID0gJ0BXTV9EUlkyN19URU1QX1VMVFJBX0xPV19XJyxcbiAgTE9XID0gJ0BXTV9EUlkyN19URU1QX0xPV19XJyxcbiAgTUVESVVNID0gJ0BXTV9EUlkyN19URU1QX01FRElVTV9XJyxcbiAgTUlEX0hJR0ggPSAnQFdNX0RSWTI3X1RFTVBfTUlEX0hJR0hfVycsXG4gIEhJR0ggPSAnQFdNX0RSWTI3X1RFTVBfSElHSF9XJyxcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgdGltZWQgZHJ5IHNldHRpbmcuXG4gKi9cbmV4cG9ydCBlbnVtIFRpbWVEcnkge1xuICBPRkYgPSAnLScsXG4gIFRXRU5UWSA9ICcyMCcsXG4gIFRISVJUWSA9ICczMCcsXG4gIEZPVVJUWSA9ICc0MCcsXG4gIEZJRlRZID0gJzUwJyxcbiAgU0lYVFkgPSAnNjAnLFxufVxuXG5leHBvcnQgY2xhc3MgRHJ5ZXJEZXZpY2UgZXh0ZW5kcyBEZXZpY2Uge1xuICBwdWJsaWMgYXN5bmMgcG9sbCgpIHtcbiAgICBpZiAoIXRoaXMubW9uaXRvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzcCA9IGF3YWl0IHRoaXMubW9uaXRvci5wb2xsKCk7XG4gICAgaWYgKHJlc3ApIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLm1vZGVsLmRlY29kZU1vbml0b3IocmVzcCk7XG4gICAgICByZXR1cm4gbmV3IERyeWVyU3RhdHVzKHRoaXMsIGRhdGEpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEcnllclN0YXR1cyB7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgZGV2aWNlOiBEcnllckRldmljZSxcbiAgICBwdWJsaWMgZGF0YTogYW55LFxuICApIHsgfVxuXG4gIHB1YmxpYyBnZXQgc3RhdGUoKSB7XG4gICAgY29uc3Qga2V5ID0gbG9va3VwRW51bSgnU3RhdGUnLCB0aGlzLmRhdGEsIHRoaXMuZGV2aWNlKTtcbiAgICByZXR1cm4gYXNFbnVtKERyeWVyU3RhdGUsIGtleSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHByZXZpb3VzU3RhdGUoKSB7XG4gICAgY29uc3Qga2V5ID0gbG9va3VwRW51bSgnUHJlU3RhdGUnLCB0aGlzLmRhdGEsIHRoaXMuZGV2aWNlKTtcbiAgICByZXR1cm4gYXNFbnVtKERyeWVyU3RhdGUsIGtleSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGRyeUxldmVsKCkge1xuICAgIGNvbnN0IGtleSA9IGxvb2t1cEVudW0oJ0RyeUxldmVsJywgdGhpcy5kYXRhLCB0aGlzLmRldmljZSk7XG4gICAgcmV0dXJuIGFzRW51bShEcnlMZXZlbCwga2V5KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgdGVtcGVyYXR1cmVDb250cm9sKCkge1xuICAgIGNvbnN0IGtleSA9IGxvb2t1cEVudW0oJ1RlbXBDb250cm9sJywgdGhpcy5kYXRhLCB0aGlzLmRldmljZSk7XG4gICAgcmV0dXJuIGFzRW51bShUZW1wQ29udHJvbCwga2V5KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgdGltZURyeSgpIHtcbiAgICBjb25zdCBrZXkgPSBsb29rdXBFbnVtKCdUaW1lRHJ5JywgdGhpcy5kYXRhLCB0aGlzLmRldmljZSk7XG4gICAgcmV0dXJuIGFzRW51bShUaW1lRHJ5LCBrZXkpO1xuICB9XG5cbiAgcHVibGljIGdldCBpc09uKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlICE9PSBEcnllclN0YXRlLk9GRjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgcmVtYWluaW5nVGltZSgpIHtcbiAgICByZXR1cm4gYXNUaW1lKCdSZW1haW5fVGltZV9IJywgJ1JlbWFpbl9UaW1lX00nLCB0aGlzLmRhdGEpO1xuICB9XG5cbiAgcHVibGljIGdldCBpbml0aWFsVGltZSgpIHtcbiAgICByZXR1cm4gYXNUaW1lKCdJbml0aWFsX1RpbWVfSCcsICdJbml0aWFsX1RpbWVfTScsIHRoaXMuZGF0YSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGNvdXJzZSgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGxvb2t1cFJlZmVyZW5jZSgnQ291cnNlJywgdGhpcy5kYXRhLCB0aGlzLmRldmljZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldCBzbWFydENvdXJzZSgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGxvb2t1cFJlZmVyZW5jZSgnU21hcnRDb3Vyc2UnLCB0aGlzLmRhdGEsIHRoaXMuZGV2aWNlKTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGVycm9yKCkge1xuICAgIGNvbnN0IHZhbHVlID0gbG9va3VwUmVmZXJlbmNlKCdFcnJvcicsIHRoaXMuZGF0YSwgdGhpcy5kZXZpY2UpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuIl19